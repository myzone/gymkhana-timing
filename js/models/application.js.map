{"version":3,"sources":["application.es6"],"names":[],"mappings":"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","file":"application.js","sourcesContent":["define(['ramda', 'shuttle', 'moment', 'utils/commons'], (R, Shuttle, moment, Commons) => {\n    const parse = raw => {\n        try {\n            return JSON.parse(raw);\n        } catch (e) {\n            console.error('YOUR DATA IS BROKEN (dump is below)');\n            console.error(raw);\n            console.error('===================================');\n\n            throw e;\n        }\n    };\n\n    const Application = {\n        empty: () => {\n            return Shuttle.ref({});\n        },\n        emptyEvent: (id, name) => {\n            return Shuttle.ref({\n                id: id,\n                configuration: Shuttle.ref({\n                    name: name,\n                    eventDate: moment().day(6),\n                    eventPlace: null,\n                    course: null,\n                    penalties: {},\n                    countries: []\n                }),\n                participants: Shuttle.ref([]),\n                heats: Shuttle.ref([])\n            });\n        },\n        marshall: application => JSON.stringify(Shuttle.json(application)),\n        unmashall: raw => Shuttle.ref(R.mapObj(event => Shuttle.ref({\n            id: event.id,\n            configuration: Shuttle.ref({\n                name: event.configuration.name,\n                eventDate: moment(event.configuration.eventDate),\n                eventPlace: event.configuration.eventPlace,\n                heatCount: event.configuration.heatCount,\n                course: event.configuration.course,\n                penalties: R.mapObj(penalty => Shuttle.ref({\n                    id: penalty.id,\n                    name: penalty.name,\n                    description: penalty.description,\n                    delay: moment.duration(penalty.delay),\n                    type: penalty.type\n                }), event.configuration.penalties),\n                countries: event.configuration.countries\n            }),\n            participants: Shuttle.ref(R.map(participant => Shuttle.ref({\n                id: participant.id,\n                number: participant.number,\n                country: participant.country,\n                name: participant.name,\n                motorcycle: participant.motorcycle,\n                birthday: moment(participant.birthday)\n            }), event.participants)),\n            heats: Shuttle.ref(R.map(heat => R.identity({\n                id: heat.id,\n                participant: heat.participant,\n                number: heat.number,\n                result: {\n                    type: heat.result.type,\n                    time: heat.result.time ? moment.duration(heat.result.time) : undefined,\n                    penalties: heat.result.penalties\n                }\n            }), event.heats))\n        }), parse(raw))),\n        validate: raw => {\n            try {\n                return R.equals(JSON.parse(raw), JSON.parse(Application.marshall(Application.unmashall(raw))));\n            } catch (e) {\n                return false;\n            }\n        }\n    };\n\n    return Application;\n});\n"]}