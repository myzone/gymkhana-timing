{"version":3,"sources":["competition.es6"],"names":[],"mappings":";;;;;;;;;;AAAA,MAAM,CAAC,CAAC,OAAO,EAAE,cAAc,EAAE,iBAAiB,EAAE,OAAO,EAAE,QAAQ,EAAE,kBAAkB,EAAE,SAAS,EAAE,eAAe,EAAE,2BAA2B,EAAE,yBAAyB,EAAE,eAAe,CAAC,EAAE,UAAC,KAAK,EAAE,WAAW,EAAE,cAAc,EAAE,CAAC,EAAE,MAAM,EAAE,eAAe,EAAE,OAAO,EAAE,YAAY,EAAE,iBAAiB,EAAE,eAAe,EAAE,OAAO,EAAK;AACrU,QAAM,WAAW,GAAG,CAAC,CAAC;AACtB,QAAM,cAAc,GAAG;AACnB,kBAAU,EAAE,SAAS;AACrB,mBAAW,EAAE,SAAS;AACtB,gBAAQ,EAAE,QAAQ;KACrB,CAAC;;AAEF,QAAM,cAAc,GAAG,SAAjB,cAAc,CAAG,QAAQ;eAAI,QAAQ,CAAC,MAAM,CAAC,WAAW,EAAE,EAAC,IAAI,EAAE,KAAK,EAAC,CAAC;KAAA,CAAC;;QAGzE,QAAQ;kBAAR,QAAQ;;AAEC,iBAFT,QAAQ,CAEE,KAAK,EAAE;;;kCAFjB,QAAQ;;AAGN,uCAHF,QAAQ,6CAGA,KAAK,EAAE;;AAEb,gBAAI,CAAC,IAAI,GAAG,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAChD,gBAAI,CAAC,SAAS,GAAG,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;;AAE1D,gBAAI,CAAC,IAAI,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,UAAC,IAAI,EAAE,SAAS,EAAK;AAC1E,uBAAO;AACH,sBAAE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,MAAK,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,GAAG,MAAK,KAAK,CAAC,MAAM,CAAC,EAAE,GAAG,OAAO,CAAC,IAAI,EAAE;AAC1E,+BAAW,EAAE,MAAK,KAAK,CAAC,MAAM,CAAC,WAAW;AAC1C,0BAAM,EAAE,MAAK,KAAK,CAAC,MAAM,CAAC,MAAM;AAChC,0BAAM,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,GACzC,EAAC,IAAI,EAAE,aAAa,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAC,GACvD,EAAC,IAAI,EAAE,cAAc,EAAC;iBAC/B,CAAA;aACJ,CAAC,CAAC;;AAEH,gBAAI,CAAC,QAAQ,GAAG,UAAC,CAAC,EAAE,IAAI,EAAK;AACzB,oBAAI,KAAK,GAAG,MAAK,KAAK,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;;AAEnC,oBAAM,KAAK,GAAG,CAAC,CAAC,SAAS,CAAC,UAAA,IAAI;2BAAI,IAAI,CAAC,EAAE,IAAI,MAAK,KAAK,CAAC,MAAM,CAAC,EAAE;iBAAA,EAAE,KAAK,CAAC,CAAC;AAC1E,oBAAI,KAAK,GAAG,CAAC,CAAC,EAAE;AACZ,yBAAK,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;iBACrC;;AAED,sBAAK,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;aAC/C,CAAA;SACJ;;qBA7BC,QAAQ;;mBA+BO,6BAAG;AAChB,oBAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aACxC;;;mBAEmB,gCAAG;AACnB,oBAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aAC3C;;;mBAEK,kBAAG;AACL,uBAAO,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,EAAE,CACvB,KAAK,CAAC,aAAa,CAAC,mBAAmB,EAAE;AACrC,yBAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK;AACvB,8BAAU,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU;;AAEjC,wBAAI,EAAE,IAAI,CAAC,IAAI;AACf,6BAAS,EAAE,IAAI,CAAC,SAAS;AACzB,gCAAY,EAAE,IAAI,CAAC,KAAK,CAAC,YAAY;;AAErC,0BAAM,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM;iBAC5B,CAAC,EACF,KAAK,CAAC,aAAa,CAAC,mBAAmB,EAAE;AACrC,yBAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK;AACvB,8BAAU,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU;;AAEjC,wBAAI,EAAE,IAAI,CAAC,IAAI;AACf,6BAAS,EAAE,IAAI,CAAC,SAAS;AACzB,gCAAY,EAAE,IAAI,CAAC,KAAK,CAAC,YAAY;;AAErC,0BAAM,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM;;AAEzB,wBAAI,EAAE,IAAI,CAAC,IAAI;AACf,yBAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK;iBAC1B,CAAC,CACL,CAAC,CAAC;aACN;;;eAjEC,QAAQ;OAAS,KAAK,CAAC,SAAS;;QAqEhC,WAAW;kBAAX,WAAW;;iBAAX,WAAW;kCAAX,WAAW;;uCAAX,WAAW;;;qBAAX,WAAW;;mBAEP,kBAAG;;;AACL,oBAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC;AACnC,oBAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;;AAErC,oBAAM,OAAO,GAAG,SAAV,OAAO,GAAS;AAClB,wBAAI,QAAQ,EAAE;AACV,4BAAM,KAAK,GAAG,CAAC,CAAC,SAAS,CAAC,UAAA,SAAS;mCAAI,OAAO,CAAC,EAAE;yBAAA,EAAE,OAAK,KAAK,CAAC,SAAS,CAAC,CAAC;;AAEzE,4BAAI,KAAK,GAAG,CAAC,CAAC,EAAE;AACZ,mCAAK,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,OAAK,KAAK,CAAC,SAAS,CAAC,CAAC,CAAA;yBACrE;qBACJ;iBACJ,CAAC;;AAEF,uBAAO,KAAK,CAAC,aAAa,CAAC,cAAc,CAAC,KAAK,EAAE;AAC7C,2BAAO,EAAE,cAAc,CAAC,OAAO,CAAC,IAAI,CAAC;AACrC,2BAAO,EAAE,OAAO;iBACnB,EAAE,QAAQ,GACL,CAAC,OAAO,CAAC,IAAI,EAAE,GAAG,EAAE,KAAK,CAAC,aAAa,CAAC,cAAc,CAAC,SAAS,EAAE;AAChE,6BAAS,EAAE,gBAAgB;AAC3B,yBAAK,EAAE,QAAQ;iBAClB,CAAC,CAAC,GACD,OAAO,CAAC,IAAI,CAAC,CAAC;aACvB;;;eAzBC,WAAW;OAAS,OAAO,CAAC,KAAK,CAAC,SAAS;;QA6B3C,gBAAgB;kBAAhB,gBAAgB;;iBAAhB,gBAAgB;kCAAhB,gBAAgB;;uCAAhB,gBAAgB;;;qBAAhB,gBAAgB;;mBAEZ,kBAAG;;;AACL,oBAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC;;AAEnC,uBAAO,KAAK,CAAC,aAAa,CAAC,cAAc,CAAC,cAAc,EAAE;AACtD,6BAAS,EAAE,QAAQ;AACnB,6BAAS,EAAE,IAAI;AACf,2BAAO,EAAE,KAAK,CAAC,aAAa,CAAC,cAAc,CAAC,OAAO,EAAE,EAAE,EAAE,OAAO,CAAC,WAAW,CAAC;iBAChF,EAAE,KAAK,CAAC,aAAa,CAAC,cAAc,CAAC,MAAM,EAAE;AAC1C,0BAAM,EAAE,OAAO;AACf,2BAAO,EAAE,cAAc,CAAC,OAAO,CAAC,IAAI,CAAC;AACrC,2BAAO,EAAE,mBAAM;AACX,+BAAK,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,EAAE,OAAK,KAAK,CAAC,SAAS,CAAC,CAAC,CAAA;qBACvE;iBACJ,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;aACrB;;;eAhBC,gBAAgB;OAAS,OAAO,CAAC,KAAK,CAAC,SAAS;;QAqBhD,mBAAmB;kBAAnB,mBAAmB;;iBAAnB,mBAAmB;kCAAnB,mBAAmB;;uCAAnB,mBAAmB;;;qBAAnB,mBAAmB;;mBAEf,kBAAG;;;AACL,oBAAM,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC;AACtB,oBAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;AAC3D,oBAAM,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC;AAC7C,oBAAM,SAAS,GAAG,CAAC,CAAC,MAAM,CAAC,UAAA,OAAO;2BAAI,CAAC,CAAC,GAAG,CAAC,OAAO,EAAE,YAAY,CAAC;iBAAA,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;AAC1F,oBAAM,QAAQ,GAAG,SAAX,QAAQ,GAAS;AACnB,wBAAI,CAAC,CAAC,KAAK,CAAC,OAAK,KAAK,CAAC,UAAU,CAAC,EAAE;AAChC,+BAAK,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,OAAK,KAAK,CAAC,KAAK,CAAC,CAAC;qBAC/C;iBACJ,CAAC;;AAEF,uBAAO,GAAG,CAAC,EAAE,CAAC;AACV,6BAAS,EAAE,QAAQ,GAAG,wBAAwB,GAAG,EAAE;AACnD,2BAAO,EAAE,QAAQ;iBACpB,EAAE,CACC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,EAChC,GAAG,CAAC,EAAE,CAAC,EAAC,SAAS,EAAE,UAAU,EAAC,EAAE,QAAQ,GAClC,KAAK,CAAC,aAAa,CAAC,iBAAiB,EAAE,EAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,EAAC,CAAC,GAChE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,GAAG,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,EAC3E,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,UAAC,OAAO,EAAE,CAAC;2BAAK,CAAC,KAAK,CAAC,aAAa,CAAC,WAAW,EAAE;AAC3E,2BAAG,EAAE,CAAC;AACN,+BAAO,EAAE,YAAY,CAAC,OAAO,CAAC;AAC9B,iCAAS,EAAE,OAAK,KAAK,CAAC,SAAS;AAC/B,gCAAQ,EAAE,QAAQ;qBACrB,CAAC,EAAE,GAAG,CAAC;iBAAA,EAAE,SAAS,CAAC,CAAC,EACrB,GAAG,CAAC,EAAE,CAAC,EAAC,SAAS,EAAE,UAAU,EAAC,EAAE,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,EAC5E,GAAG,CAAC,EAAE,CAAC,EAAC,SAAS,EAAE,UAAU,EAAC,QAAM,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,CAAG,CACrF,CAAC,CAAC;aACN;;;eA9BC,mBAAmB;OAAS,OAAO,CAAC,KAAK,CAAC,SAAS;;QAkCnD,mBAAmB;kBAAnB,mBAAmB;;iBAAnB,mBAAmB;kCAAnB,mBAAmB;;uCAAnB,mBAAmB;;;qBAAnB,mBAAmB;;mBAEf,kBAAG;AACL,uBAAO,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,GAC1C,IAAI,CAAC,cAAc,EAAE,GACrB,IAAI,CAAC,iBAAiB,EAAE,CAAC;aAClC;;;mBAEa,0BAAG;;;AACb,oBAAM,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC;;AAEtB,uBAAO,GAAG,CAAC,EAAE,CAAC,EAAC,SAAS,EAAE,mCAAmC,EAAC,EAAE,CAC5D,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EACd,GAAG,CAAC,EAAE,CAAC,EAAC,SAAS,EAAE,UAAU,EAAC,EAAE,EAAE,CAAC,EACnC,GAAG,CAAC,EAAE,CAAC,EAAC,OAAO,EAAE,CAAC,EAAC,EAAE,KAAK,CAAC,aAAa,CAAC,cAAc,CAAC,WAAW,EAAE,EAAE,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,UAAC,OAAO,EAAE,CAAC,EAAK;AACvG,2BAAO,KAAK,CAAC,aAAa,CAAC,gBAAgB,EAAE;AACzC,+BAAO,EAAE,OAAO;AAChB,iCAAS,EAAE,OAAK,KAAK,CAAC,SAAS;qBAClC,CAAC,CAAC;iBACN,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,EACvC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,KAAK,CAAC,aAAa,CAAC,cAAc,CAAC,MAAM,EAAE;AAClD,0BAAM,EAAE,OAAO;AACf,2BAAO,EAAE,mBAAM;AACX,+BAAK,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;qBACnC;iBACJ,EAAE,KAAK,CAAC,aAAa,CAAC,cAAc,CAAC,SAAS,EAAE;AAC7C,yBAAK,EAAE,IAAI;iBACd,CAAC,CAAC,CAAC,CACP,CAAC,CAAA;aACL;;;mBAEgB,6BAAG;AAChB,uBAAO,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,EAAC,GAAG,EAAE,OAAO,EAAC,CAAC,CAAC;aACvC;;;eAjCC,mBAAmB;OAAS,OAAO,CAAC,KAAK,CAAC,SAAS;;QAsCnD,eAAe;kBAAf,eAAe;;AAEN,iBAFT,eAAe,CAEL,KAAK,EAAE;kCAFjB,eAAe;;AAGb,uCAHF,eAAe,6CAGP,KAAK,EAAE;SAChB;;qBAJC,eAAe;;mBAMX,kBAAG;;;AACL,oBAAM,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC;AACtB,oBAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC;AAC3C,oBAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;;AAE/B,uBAAO,GAAG,CAAC,EAAE,CAAC;AACV,uBAAG,EAAE,0BAA0B;AAC/B,6BAAS,qBAAkB,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,UAAU,GAAG,EAAE,CAAA,AAAE;AAChE,2BAAO,EAAE;+BAAM,OAAK,KAAK,CAAC,QAAQ,EAAE;qBAAA;iBACvC,EAAE,CACC,GAAG,CAAC,EAAE,CAAC,EAAC,SAAS,EAAE,0BAA0B,EAAC,EAAE,GAAG,CAAC,IAAI,CAAC,EAAC,SAAS,EAAE,aAAa,EAAC,EAAE,WAAW,CAAC,MAAM,CAAC,CAAC,EACzG,GAAG,CAAC,EAAE,CAAC,EAAC,SAAS,EAAE,0BAA0B,EAAC,EAAE,WAAW,CAAC,OAAO,GAAG,KAAK,CAAC,aAAa,CAAC,eAAe,EAAE,EAAC,OAAO,EAAE,WAAW,CAAC,OAAO,EAAC,CAAC,GAAG,EAAE,CAAC,EAChJ,GAAG,CAAC,EAAE,CAAC,EAAC,SAAS,EAAE,0BAA0B,EAAC,EAAE,WAAW,CAAC,IAAI,CAAC,EACjE,GAAG,CAAC,EAAE,CAAC,EAAC,SAAS,EAAE,gBAAgB,EAAC,EAAE,WAAW,CAAC,UAAU,CAAC,EAC7D,GAAG,CAAC,EAAE,CAAC,EAAC,SAAS,EAAE,gBAAgB,EAAC,EAAE,WAAW,CAAC,KAAK,CAAC,EACxD,GAAG,CAAC,EAAE,CAAC,EAAC,SAAS,EAAE,0BAA0B,EAAC,EAAK,KAAK,CAAC,MAAM,SAAI,WAAW,CAAG,EACjF,GAAG,CAAC,EAAE,CAAC,EAAC,SAAS,EAAE,gBAAgB,EAAC,EAAE,WAAW,CAAC,IAAI,CAAC,CAC1D,CAAC,CAAC;aACN;;;eAxBC,eAAe;OAAS,OAAO,CAAC,KAAK,CAAC,SAAS;;QA4B/C,yBAAyB;kBAAzB,yBAAyB;;AAEhB,iBAFT,yBAAyB,CAEf,KAAK,EAAE;;;kCAFjB,yBAAyB;;AAGvB,uCAHF,yBAAyB,6CAGjB,KAAK,EAAE;;AAEb,gBAAI,CAAC,UAAU,GAAG,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;;AAErD,gBAAI,CAAC,UAAU,GAAG,CAAC,CAAC,OAAO,CACvB,UAAA,IAAI;uBAAI,IAAI,CAAC,WAAW;aAAA,EACxB,CAAC,CAAC,IAAI,EACN,CAAC,CAAC,MAAM,CAAC,UAAA,IAAI;uBAAI,IAAI,CAAC,KAAK;aAAA,CAAC,EAC5B,CAAC,CAAC,GAAG,CAAC,UAAA,WAAW;uBAAI,CAAC,CAAC,QAAQ,CAAC;AAC5B,+BAAW,EAAE,WAAW;AACxB,yBAAK,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,UAAA,IAAI;+BAAI,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,WAAW,CAAC,EAAE,CAAC;qBAAA,EAAE,OAAK,KAAK,CAAC,KAAK,CAAC,CAAC;iBAClG,CAAC;aAAA,CAAC,EACH,CAAC,CAAC,GAAG,CAAC,UAAA,GAAG;uBAAI,GAAG,CAAC,GAAG,EAAE;aAAA,CAAC,CAC1B,CAAC;SACL;;qBAjBC,yBAAyB;;mBAmBrB,kBAAG;;;AACL,oBAAM,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC;AACtB,oBAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC;AAC3C,oBAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;AACnC,oBAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC;;AAEnC,uBAAO,GAAG,CAAC,EAAE,CAAC,EAAC,GAAG,EAAE,0BAA0B,EAAC,EAAE,CAC7C,GAAG,CAAC,EAAE,CAAC,EAAC,KAAK,EAAE,EAAC,OAAO,EAAE,GAAG,EAAC,EAAC,EAAE,KAAK,CAAC,aAAa,CAAC,QAAQ,EAAE,EAAC,SAAS,EAAE,WAAW,EAAC,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,aAAa,CAAC,cAAc,CAAC,SAAS,EAAE;AACtJ,2BAAO,EAAE;+BAAM,OAAK,KAAK,CAAC,MAAM,CAAC,OAAK,UAAU,CAAC,OAAK,KAAK,CAAC,YAAY,CAAC,CAAC;qBAAA;AAC1E,yBAAK,EAAE,SAAS;iBACnB,CAAC,GAAG,EAAE,CAAC,CAAC,EACT,GAAG,CAAC,EAAE,CAAC,EAAC,KAAK,EAAE,EAAC,OAAO,EAAE,GAAG,EAAC,EAAE,OAAO,EAAE,CAAC,EAAC,EAAE,CACxC,GAAG,CAAC,GAAG,CAAC,EAAC,SAAS,gCAA6B,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,qBAAqB,GAAG,EAAE,CAAA,AAAE,EAAC,EAAE,KAAK,CAAC,aAAa,CAAC,cAAc,CAAC,KAAK,EAAE;AACxI,6BAAS,EAAE,mDAAmD;AAC9D,8BAAU,EAAE,IAAI;AAChB,6BAAS,EAAE,IAAI;iBAClB,EAAE,CACC,GAAG,CAAC,KAAK,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,CACrB,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EACd,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,MAAM,CAAC,EAClB,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,SAAS,CAAC,EACrB,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,OAAO,CAAC,EACnB,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,GAAG,CAAC,CAClB,CAAC,CAAC,EACH,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,UAAC,MAAM,EAAE,CAAC,EAAK;AAC7B,2BAAO,KAAK,CAAC,aAAa,CAAC,QAAQ,EAAE;AACjC,2BAAG,EAAE,CAAC;;AAEN,6BAAK,EAAE,CAAC;AACR,kCAAU,EAAE,UAAU;AACtB,oCAAY,EAAE,OAAK,KAAK,CAAC,YAAY;;AAErC,8BAAM,EAAE,MAAM;AACd,6BAAK,EAAE,OAAK,KAAK,CAAC,KAAK;qBAC1B,CAAC,CAAA;iBACL,EAAE,OAAO,CAAC,CACd,CAAC,CAAC,CACN,CAAC,EACF,GAAG,CAAC,EAAE,CAAC,EAAC,KAAK,EAAE,EAAC,OAAO,EAAE,GAAG,EAAC,EAAE,OAAO,EAAE,CAAC,EAAC,CAAC,CAC9C,CAAC,CAAC;aACN;;;eA3DC,yBAAyB;OAAS,OAAO,CAAC,KAAK,CAAC,SAAS;;QA+DzD,eAAe;kBAAf,eAAe;;AAEN,iBAFT,eAAe,CAEL,KAAK,EAAE;;;kCAFjB,eAAe;;AAGb,uCAHF,eAAe,6CAGP,KAAK,EAAE;;AAEb,gBAAI,CAAC,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,UAAA,WAAW;uBAAI,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,EAAE,EAAE,OAAK,KAAK,CAAC,MAAM,CAAC,aAAa,CAAC;aAAA,EAAE,CAAC,CAAC,GAAG,CAAC,UAAA,WAAW;uBAAI,WAAW,CAAC,GAAG,EAAE;aAAA,EAAE,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;SACrL;;qBANC,eAAe;;mBAQX,kBAAG;;;AACL,oBAAM,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC;AACtB,oBAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC;AAC1C,oBAAM,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,UAAA,WAAW,EAAI;AAC9B,wBAAM,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC,QAAK,KAAK,CAAC,OAAO,EAAE,WAAW,CAAC,GAAG,EAAE,CAAC,CAAC;AAC/D,wBAAM,KAAK,GAAG,QAAK,KAAK,CAAC,KAAK,CACzB,GAAG,CAAC,UAAA,KAAK;+BAAI,CAAC,CAAC,MAAM,CAAC,UAAA,IAAI;mCAAI,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,WAAW,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC;yBAAA,EAAE,KAAK,CAAC;qBAAA,CAAC,CAAC;;AAE7F,wBAAM,OAAO,GAAG,KAAK,CAChB,OAAO,CAAC,UAAA,KAAK;+BAAI,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,UAAA,IAAI,EAAI;AAC7C,gCAAI,IAAI,CAAC,MAAM,CAAC,IAAI,IAAI,aAAa,EACjC,OAAO,OAAO,CACT,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,UAAA,OAAO;uCAAI,QAAK,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC;6BAAA,EAAE,CAAC,CAAC,MAAM,CAAC,UAAA,OAAO;uCAAI,CAAC,CAAC,GAAG,CAAC,OAAO,EAAE,QAAK,KAAK,CAAC,YAAY,CAAC;6BAAA,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CACjJ,GAAG,CAAC,UAAA,SAAS;uCAAI,CAAC,CAAC,QAAQ,CAAC;AACzB,sCAAE,EAAE,IAAI,CAAC,EAAE;AACX,+CAAW,EAAE,IAAI,CAAC,WAAW;AAC7B,0CAAM,EAAE,IAAI,CAAC,MAAM;AACnB,wCAAI,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI;AACtB,6CAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS;AAChC,6CAAS,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC;AAC7B,+CAAO,EAAE,EAAE;AACX,+CAAO,EAAE,EAAE;AACX,oDAAY,EAAE,GAAG;qCACpB,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,UAAC,IAAI,EAAE,KAAK;+CAAK,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC;qCAAA,EAAE,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,UAAA,OAAO;+CAAI,OAAO,CAAC,KAAK;qCAAA,EAAE,SAAS,CAAC,CAAC,CAAC;iCACjI,CAAC;6BAAA,CAAC,CAAC;;AAEZ,gCAAI,IAAI,CAAC,MAAM,CAAC,IAAI,IAAI,cAAc,EAClC,OAAO,OAAO,CAAC,GAAG,CAAC;AACf,kCAAE,EAAE,IAAI,CAAC,EAAE;AACX,2CAAW,EAAE,IAAI,CAAC,WAAW;AAC7B,sCAAM,EAAE,IAAI,CAAC,MAAM;AACnB,oCAAI,EAAE,IAAI;AACV,yCAAS,EAAE,EAAE;AACb,yCAAS,EAAE,MAAM,CAAC,QAAQ,CAAC;AACvB,2CAAO,EAAE,EAAE;AACX,2CAAO,EAAE,EAAE;AACX,gDAAY,EAAE,GAAG;iCACpB,CAAC;6BACL,CAAC,CAAC;;AAEP,kCAAM,WAAW,CAAC;yBACrB,EAAE,CAAC,CAAC,MAAM,CAAC,UAAC,MAAM,EAAE,CAAC;mCAAK,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,UAAA,IAAI;uCAAI,IAAI,CAAC,MAAM,IAAI,CAAC,GAAG,CAAC;6BAAA,EAAE,KAAK,CAAC,IAAI;AAC/E,2CAAW,EAAE,WAAW,CAAC,GAAG,EAAE,CAAC,EAAE;AACjC,sCAAM,EAAE,CAAC,GAAG,CAAC;AACb,sCAAM,EAAE;AACJ,wCAAI,EAAE,cAAc;iCACvB;6BACJ,EAAE,MAAM,CAAC;yBAAA,EAAE,EAAE,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC;qBAAA,CAAC,CAC1C,GAAG,CAAC,UAAA,WAAW,EAAI;AAChB,4BAAM,YAAY,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,UAAA,MAAM;mCAAI,MAAM,CAAC,SAAS;yBAAA,EAAE,WAAW,CAAC,CAAC,CAAC;;AAEhH,+BAAO,CAAC,CAAC,MAAM,CAAC,UAAA,MAAM;mCAAI,MAAM,CAAC,MAAM;yBAAA,EAAE,CAAC,CAAC,GAAG,CAAC,UAAA,MAAM,EAAI;AACrD,mCAAO;AACH,kCAAE,EAAE,MAAM,CAAC,EAAE;AACb,oCAAI,EAAE,MAAM,CAAC,IAAI;AACjB,2CAAW,EAAE,MAAM,CAAC,WAAW;AAC/B,sCAAM,EAAE,MAAM,CAAC,MAAM;AACrB,yCAAS,EAAE,MAAM,CAAC,SAAS;AAC3B,yCAAS,EAAE,MAAM,CAAC,SAAS;AAC3B,yCAAS,EAAE,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC;6BACtE,CAAA;yBACJ,EAAE,WAAW,CAAC,CAAC,CAAC;qBACpB,CAAC,CAAC;;AAEP,2BAAO;AACH,mCAAW,EAAE,WAAW;AACxB,8BAAM,EAAE,MAAM;AACd,6BAAK,EAAE,KAAK;AACZ,+BAAO,EAAE,OAAO;qBACnB,CAAC;iBACL,EAAE,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;;AAE5B,uBAAO,GAAG,CAAC,GAAG,CAAC,EAAE,EAAE,CACf,KAAK,CAAC,aAAa,CAAC,cAAc,CAAC,KAAK,EAAE,EAAE,EAAE,CAC1C,KAAK,CAAC,aAAa,CAAC,cAAc,CAAC,QAAQ,EAAE;AACzC,4BAAQ,EAAE,IAAI;AACd,wBAAI,cAAY,OAAO,kBAAe;iBACzC,EAAE,CACC,KAAK,CAAC,aAAa,CAAC,cAAc,CAAC,SAAS,EAAE,EAAC,KAAK,EAAE,WAAW,EAAC,CAAC,EAAE,GAAG,EAAE,cAAc,CAC3F,CAAC,EACF,KAAK,CAAC,aAAa,CAAC,cAAc,CAAC,QAAQ,EAAE,EAAC,IAAI,cAAY,OAAO,iBAAc,EAAC,EAAE,aAAa,CAAC,EACpG,KAAK,CAAC,aAAa,CAAC,cAAc,CAAC,QAAQ,EAAE,EAAC,IAAI,EAAE,IAAI,EAAE,IAAI,cAAY,OAAO,aAAU,EAAC,EAAE,CAC1F,SAAS,EAAE,GAAG,EAAE,KAAK,CAAC,aAAa,CAAC,cAAc,CAAC,SAAS,EAAE,EAAC,KAAK,EAAE,YAAY,EAAC,CAAC,CACvF,CAAC,CACL,CAAC,EAEF,KAAK,CAAC,aAAa,CAAC,cAAc,CAAC,KAAK,EAAE;AACtC,uBAAG,EAAE,OAAO;AACZ,6BAAS,EAAE,qDAAqD;AAChE,8BAAU,EAAE,IAAI;AAChB,yBAAK,EAAE,IAAI;iBACd,EAAE,CACC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,UAAC,IAAI,EAAE,CAAC;2BAAK,GAAG,CAAC,KAAK,CAAC,EAAC,GAAG,EAAE,CAAC,EAAC,EAAE,CAC/C,KAAK,CAAC,aAAa,CAAC,eAAe,EAAE;AACjC,2BAAG,YAAU,CAAC,AAAE;AAChB,8BAAM,EAAE,IAAI,CAAC,MAAM;AACnB,gCAAQ,EAAE,oBAAM;AACZ,oCAAK,QAAQ,CAAC,EAAC,OAAO,EAAE,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,IAAI,EAAC,CAAC,CAAC;yBAC1E;AACD,mCAAW,EAAE,IAAI,CAAC,WAAW;AAC7B,6BAAK,EAAE,IAAI,CAAC,KAAK,CACZ,GAAG,CAAC,UAAA,KAAK;mCAAI,CAAC,CAAC,MAAM,CAAC,UAAA,IAAI;uCAAI,IAAI,CAAC,MAAM,CAAC,IAAI,IAAI,aAAa;6BAAA,EAAE,KAAK,CAAC;yBAAA,CAAC;AAC7E,+BAAO,EAAE,OAAO;qBACnB,CAAC,EACF,KAAK,CAAC,aAAa,CAAC,yBAAyB,EAAE;AAC3C,2BAAG,kBAAgB,CAAC,AAAE;AACtB,8BAAM,EAAE,IAAI,CAAC,MAAM;AACnB,mCAAW,EAAE,IAAI,CAAC,WAAW;AAC7B,6BAAK,EAAE,QAAK,KAAK,CAAC,KAAK;AACvB,+BAAO,EAAE,IAAI,CAAC,OAAO;AACrB,oCAAY,EAAE,QAAK,KAAK,CAAC,YAAY;AACrC,oCAAY,EAAE,QAAK,KAAK,CAAC,YAAY;AACrC,8BAAM,EAAE,gBAAC,IAAI,EAAK;AACd,oCAAK,QAAQ,CAAC,EAAC,OAAO,EAAE,IAAI,EAAC,CAAC,CAAC;yBAClC;qBACJ,CAAC,CACL,CAAC;iBAAA,EAAE,IAAI,CAAC,CACZ,CAAC,CACL,CAAC,CAAC;aACN;;;eA/HC,eAAe;OAAS,OAAO,CAAC,KAAK,CAAC,SAAS;;AAmIrD,WAAO,eAAe,CAAC;CAC1B,CAAC,CAAC","file":"competition.js","sourcesContent":["define(['react', 'react-router', 'react-bootstrap', 'ramda', 'moment', 'moment-durations', 'shuttle', 'shuttle-react', 'components/stopwatch-cell', 'components/country-flag', 'utils/commons'], (React, ReactRouter, ReactBootstrap, R, moment, momentDurations, Shuttle, ShuttleReact, StopwatchCellView, CountryFlagView, Commons) => {\n    const HEATS_COUNT = 2;\n    const PENALTY_STYLES = {\n        negligible: 'default',\n        significant: 'warning',\n        critical: 'danger'\n    };\n\n    const renderDuration = duration => duration.format(\"mm:ss.SSS\", {trim: false});\n\n\n    class HeatView extends React.Component {\n\n        constructor(props) {\n            super(props);\n\n            this.time = Shuttle.ref(this.props.result.time);\n            this.penalties = Shuttle.ref(this.props.result.penalties);\n\n            this.heat = Shuttle.combine([this.time, this.penalties], (time, penalties) => {\n                return {\n                    id: !R.isNil(this.props.result.id) ? this.props.result.id : Commons.guid(),\n                    participant: this.props.result.participant,\n                    number: this.props.result.number,\n                    result: !R.isNil(time) || !R.isEmpty(penalties)\n                        ? {type: 'TimedResult', time: time, penalties: penalties}\n                        : {type: 'NoTimeResult'}\n                }\n            });\n\n            this.listener = (_, heat) => {\n                let heats = this.props.heats.get();\n\n                const index = R.findIndex(heat => heat.id == this.props.result.id, heats);\n                if (index > -1) {\n                    heats = R.remove(index, 1, heats);\n                }\n\n                this.props.heats.set(R.append(heat, heats));\n            }\n        }\n\n        componentDidMount() {\n            this.heat.addListener(this.listener);\n        }\n\n        componentWillUnmount() {\n            this.heat.removeListener(this.listener);\n        }\n\n        render() {\n            return React.DOM.tbody({}, [\n                React.createElement(AdditionalHeatView1, {\n                    rowId: this.props.rowId,\n                    currentRow: this.props.currentRow,\n\n                    time: this.time,\n                    penalties: this.penalties,\n                    penaltyTypes: this.props.penaltyTypes,\n\n                    result: this.props.result\n                }),\n                React.createElement(AdditionalHeatView2, {\n                    rowId: this.props.rowId,\n                    currentRow: this.props.currentRow,\n\n                    time: this.time,\n                    penalties: this.penalties,\n                    penaltyTypes: this.props.penaltyTypes,\n\n                    result: this.props.result,\n\n                    heat: this.heat,\n                    heats: this.props.heats\n                })\n            ]);\n        }\n\n    }\n\n    class PenaltyView extends Shuttle.React.Component {\n\n        render() {\n            const penalty = this.state.penalty;\n            const selected = this.props.selected;\n\n            const onClick = () => {\n                if (selected) {\n                    const index = R.findIndex(penaltyId => penalty.id, this.state.penalties);\n\n                    if (index > -1) {\n                        this.props.penalties.set(R.remove(index, 1, this.state.penalties))\n                    }\n                }\n            };\n\n            return React.createElement(ReactBootstrap.Label, {\n                bsStyle: PENALTY_STYLES[penalty.type],\n                onClick: onClick\n            }, selected\n                ? [penalty.name, ' ', React.createElement(ReactBootstrap.Glyphicon, {\n                    className: 'tag-remove-btn',\n                    glyph: 'remove'\n                })]\n                : penalty.name);\n        }\n\n    }\n\n    class AddPenaltyButton extends Shuttle.React.Component {\n\n        render() {\n            const penalty = this.state.penalty;\n\n            return React.createElement(ReactBootstrap.OverlayTrigger, {\n                placement: 'bottom',\n                delayShow: 1000,\n                overlay: React.createElement(ReactBootstrap.Tooltip, {}, penalty.description)\n            }, React.createElement(ReactBootstrap.Button, {\n                bsSize: 'small',\n                bsStyle: PENALTY_STYLES[penalty.type],\n                onClick: () => {\n                    this.props.penalties.set(R.append(penalty.id, this.state.penalties))\n                }\n            }, penalty.name));\n        }\n\n    }\n\n\n    class AdditionalHeatView1 extends Shuttle.React.Component {\n\n        render() {\n            const DOM = React.DOM;\n            const selected = this.state.currentRow == this.props.rowId;\n            const penaltyTypes = this.state.penaltyTypes;\n            const penalties = R.filter(penalty => R.has(penalty, penaltyTypes), this.state.penalties);\n            const onSelect = () => {\n                if (R.isNil(this.state.currentRow)) {\n                    this.props.currentRow.set(this.props.rowId);\n                }\n            };\n\n            return DOM.tr({\n                className: selected ? 'info selected-heat-row' : '',\n                onClick: onSelect\n            }, [\n                DOM.td({}, this.props.rowId + 1),\n                DOM.td({className: 'col-md-2'}, selected\n                    ? React.createElement(StopwatchCellView, {value: this.props.time})\n                    : this.props.result.time ? renderDuration(this.props.result.time) : ''),\n                DOM.td({}, R.addIndex(R.map)((penalty, i) => [React.createElement(PenaltyView, {\n                    key: i,\n                    penalty: penaltyTypes[penalty],\n                    penalties: this.props.penalties,\n                    selected: selected\n                }), ' '], penalties)),\n                DOM.td({className: 'col-md-2'}, renderDuration(this.props.result.totalTime)),\n                DOM.td({className: 'col-md-2'}, `+${renderDuration(this.props.result.deltaTime)}`)\n            ]);\n        }\n\n    }\n\n    class AdditionalHeatView2 extends Shuttle.React.Component {\n\n        render() {\n            return this.state.currentRow == this.props.rowId\n                ? this.renderSelected()\n                : this.renderNonSelected();\n        }\n\n        renderSelected() {\n            const DOM = React.DOM;\n\n            return DOM.tr({className: 'info selected-heat-row-additional'}, [\n                DOM.td({}, ''),\n                DOM.td({className: 'col-md-2'}, ''),\n                DOM.td({colSpan: 2}, React.createElement(ReactBootstrap.ButtonGroup, {}, R.addIndex(R.map)((penalty, i) => {\n                    return React.createElement(AddPenaltyButton, {\n                        penalty: penalty,\n                        penalties: this.props.penalties\n                    });\n                }, R.values(this.state.penaltyTypes)))),\n                DOM.td({}, React.createElement(ReactBootstrap.Button, {\n                    bsSize: 'small',\n                    onClick: () => {\n                        this.props.currentRow.set(null);\n                    }\n                }, React.createElement(ReactBootstrap.Glyphicon, {\n                    glyph: 'ok'\n                })))\n            ])\n        }\n\n        renderNonSelected() {\n            return React.DOM.tr({key: 'empty'});\n        }\n\n    }\n\n\n    class ParticipantView extends Shuttle.React.Component {\n\n        constructor(props) {\n            super(props);\n        }\n\n        render() {\n            const DOM = React.DOM;\n            const participant = this.state.participant;\n            const heats = this.state.heats;\n\n            return DOM.tr({\n                key: 'opened-participant-row-1',\n                className: `non-selected ${this.props.opened ? 'selected' : ''}`,\n                onClick: () => this.props.onToggle()\n            }, [\n                DOM.td({className: 'important middle-aligned'}, DOM.span({className: 'race-number'}, participant.number)),\n                DOM.td({className: 'important middle-aligned'}, participant.country ? React.createElement(CountryFlagView, {country: participant.country}) : ''),\n                DOM.td({className: 'important middle-aligned'}, participant.name),\n                DOM.td({className: 'middle-aligned'}, participant.motorcycle),\n                DOM.td({className: 'middle-aligned'}, participant.group),\n                DOM.td({className: 'important middle-aligned'}, `${heats.length}/${HEATS_COUNT}`),\n                DOM.td({className: 'middle-aligned'}, participant.team)\n            ]);\n        }\n\n    }\n\n    class AdditionalParticipantView extends Shuttle.React.Component {\n\n        constructor(props) {\n            super(props);\n\n            this.currentRow = Shuttle.ref(this.props.currentRow);\n\n            this.detectNext = R.compose(\n                data => data.participant,\n                R.head,\n                R.sortBy(item => item.count),\n                R.map(participant => R.identity({\n                    participant: participant,\n                    count: R.length(R.filter(heat => R.equals(heat.participant, participant.id), this.state.heats))\n                })),\n                R.map(ref => ref.get())\n            );\n        }\n\n        render() {\n            const DOM = React.DOM;\n            const participant = this.state.participant;\n            const currentRow = this.currentRow;\n            const results = this.state.results;\n\n            return DOM.tr({key: 'opened-participant-row-2'}, [\n                DOM.td({style: {padding: '0'}}, React.createElement('center', {className: 'goto-next'}, this.props.opened ? React.createElement(ReactBootstrap.Glyphicon, {\n                    onClick: () => this.props.onNext(this.detectNext(this.state.participants)),\n                    glyph: 'forward'\n                }) : '')),\n                DOM.td({style: {padding: '0'}, colSpan: 3}, [\n                    DOM.div({className: `non-selected-additional ${this.props.opened ? 'selected-additional' : ''}`}, React.createElement(ReactBootstrap.Table, {\n                        className: 'inner-table group-table-striped group-table-hover',\n                        responsive: true,\n                        condensed: true\n                    }, [\n                        DOM.thead({}, DOM.tr({}, [\n                            DOM.td({}, \"\"),\n                            DOM.td({}, \"Time\"),\n                            DOM.td({}, \"Penalty\"),\n                            DOM.th({}, \"Total\"),\n                            DOM.td({}, \"∆\")\n                        ])),\n                        R.addIndex(R.map)((result, i) => {\n                            return React.createElement(HeatView, {\n                                key: i,\n\n                                rowId: i,\n                                currentRow: currentRow,\n                                penaltyTypes: this.props.penaltyTypes,\n\n                                result: result,\n                                heats: this.props.heats\n                            })\n                        }, results)\n                    ]))\n                ]),\n                DOM.td({style: {padding: '0'}, colSpan: 3})\n            ]);\n        }\n\n    }\n\n    class CompetitionView extends Shuttle.React.Component {\n\n        constructor(props) {\n            super(props);\n\n            this.state.current = R.head(R.filter(participant => R.equals(participant.id, this.props.params.participantId), R.map(participant => participant.get(), this.state.participants)));\n        }\n\n        render() {\n            const DOM = React.DOM;\n            const eventId = this.props.params.eventId;\n            const data = R.map(participant => {\n                const opened = R.equals(this.state.current, participant.get());\n                const heats = this.props.heats\n                    .map(heats => R.filter(heat => R.equals(heat.participant, participant.get().id), heats));\n\n                const results = heats\n                    .flatMap(heats => Shuttle.sequence(R.map(heat => {\n                        if (heat.result.type == 'TimedResult')\n                            return Shuttle\n                                .sequence(R.map(penalty => this.state.penaltyTypes[penalty], R.filter(penalty => R.has(penalty, this.state.penaltyTypes), heat.result.penalties)))\n                                .map(penalties => R.identity({\n                                    id: heat.id,\n                                    participant: heat.participant,\n                                    number: heat.number,\n                                    time: heat.result.time,\n                                    penalties: heat.result.penalties,\n                                    totalTime: R.min(moment.duration({\n                                        minutes: 59,\n                                        seconds: 59,\n                                        milliseconds: 999\n                                    }), R.reduce((time, delay) => time.add(delay), moment.duration(heat.result.time), R.map(penalty => penalty.delay, penalties)))\n                                }));\n\n                        if (heat.result.type == 'NoTimeResult')\n                            return Shuttle.ref({\n                                id: heat.id,\n                                participant: heat.participant,\n                                number: heat.number,\n                                time: null,\n                                penalties: [],\n                                totalTime: moment.duration({\n                                    minutes: 59,\n                                    seconds: 59,\n                                    milliseconds: 999\n                                })\n                            });\n\n                        throw 'undefined';\n                    }, R.reduce((result, i) => R.append(R.find(heat => heat.number == i + 1, heats) || {\n                        participant: participant.get().id,\n                        number: i + 1,\n                        result: {\n                            type: 'NoTimeResult'\n                        }\n                    }, result), [], R.range(0, HEATS_COUNT)))))\n                    .map(semiResults => {\n                        const bestHeatTime = R.reduce(R.min, moment.duration(Infinity), R.map(result => result.totalTime, semiResults));\n\n                        return R.sortBy(result => result.number, R.map(result => {\n                            return {\n                                id: result.id,\n                                time: result.time,\n                                participant: result.participant,\n                                number: result.number,\n                                penalties: result.penalties,\n                                totalTime: result.totalTime,\n                                deltaTime: moment.duration(result.totalTime).subtract(bestHeatTime)\n                            }\n                        }, semiResults));\n                    });\n\n                return {\n                    participant: participant,\n                    opened: opened,\n                    heats: heats,\n                    results: results\n                };\n            }, this.state.participants);\n\n            return DOM.div({}, [\n                React.createElement(ReactBootstrap.Pager, {}, [\n                    React.createElement(ReactBootstrap.PageItem, {\n                        previous: true,\n                        href: `#event/${eventId}/registration`\n                    }, [\n                        React.createElement(ReactBootstrap.Glyphicon, {glyph: 'menu-left'}), ' ', \"Registration\"\n                    ]),\n                    React.createElement(ReactBootstrap.PageItem, {href: `#event/${eventId}/competition`}, \"Competition\"),\n                    React.createElement(ReactBootstrap.PageItem, {next: true, href: `#event/${eventId}/results`}, [\n                        \"Results\", ' ', React.createElement(ReactBootstrap.Glyphicon, {glyph: 'menu-right'})\n                    ])\n                ]),\n\n                React.createElement(ReactBootstrap.Table, {\n                    key: 'table',\n                    className: 'group-table-striped group-table-hover data-editable',\n                    responsive: true,\n                    hover: true\n                }, [\n                    R.addIndex(R.map)((data, i) => DOM.tbody({key: i}, [\n                        React.createElement(ParticipantView, {\n                            key: `main-${i}`,\n                            opened: data.opened,\n                            onToggle: () => {\n                                this.setState({current: !data.opened ? data.participant.get() : null});\n                            },\n                            participant: data.participant,\n                            heats: data.heats\n                                .map(heats => R.filter(heat => heat.result.type == 'TimedResult', heats)),\n                            eventId: eventId\n                        }),\n                        React.createElement(AdditionalParticipantView, {\n                            key: `additional-${i}`,\n                            opened: data.opened,\n                            participant: data.participant,\n                            heats: this.props.heats,\n                            results: data.results,\n                            penaltyTypes: this.props.penaltyTypes,\n                            participants: this.props.participants,\n                            onNext: (next) => {\n                                this.setState({current: next});\n                            }\n                        })\n                    ]), data)\n                ])\n            ]);\n        }\n\n    }\n\n    return CompetitionView;\n});\n"]}