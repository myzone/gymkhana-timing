{"version":3,"sources":["create.es6"],"names":[],"mappings":"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","file":"create.js","sourcesContent":["define(['react', 'react-bootstrap', 'ramda', 'shuttle', 'shuttle-react', 'utils/commons'], (React, ReactBootstrap, R, Shuttle, ShuttleReact, Commons) => {\n    class CreateView extends Shuttle.React.Component {\n\n        constructor(params) {\n            super(params);\n\n            this.state.name = \"\";\n        }\n\n        render() {\n            const DOM = React.DOM;\n            const nameIsOk = this.validateName();\n\n            return React.createElement(ReactBootstrap.Modal, {\n                show: this.props.opened\n            }, [\n                React.createElement(ReactBootstrap.Panel, {\n                    header: DOM.h3({}, \"Create new event\"),\n                    bsStyle: 'primary',\n                    style: {marginBottom: '0'}\n                }, [\n                    DOM.form({className: 'form-horizontal'}, [\n                        React.createElement(ReactBootstrap.Input, {\n                            label: \"Name\",\n\n                            type: 'text',\n                            labelClassName: 'col-md-1',\n                            wrapperClassName: 'col-md-11',\n\n                            bsStyle: nameIsOk ? 'success' : 'error',\n                            hasFeedback: true,\n                            defaultValue: this.state.name,\n                            onChange: (e) => this.setState({name: e.target.value})\n                        })\n                    ]),\n                    React.createElement(ReactBootstrap.ButtonGroup, {className: 'pull-right'}, [\n                        React.createElement(ReactBootstrap.Button, {\n                            bsStyle: nameIsOk ? 'primary' : 'submit',\n                            disabled: !nameIsOk,\n                            style: {opacity: '1'},\n                            onClick: () => {\n                                const eventId = Commons.guid();\n\n                                const application = Shuttle.ref({\n                                        id: eventId,\n                                        configuration: Shuttle.ref({\n                                            name: this.state.name\n                                        }),\n                                        participants: Shuttle.ref([]),\n                                        heats: Shuttle.ref([])\n                                });\n                                this.props.application.set(R.assoc(eventId, application, this.state.application));\n\n                                window.location.hash = `#/`;\n                            }\n                        }, \"Create\"),\n                        React.createElement(ReactBootstrap.Button, {onClick: () => {\n                            Commons.setQueryParams(R.dissoc('modal', Commons.getQueryParams()))\n                        }}, \"Cancel\")\n                    ])\n                ])\n            ]);\n        }\n\n        validateName() {\n            return !R.isEmpty(this.state.name)\n                && !R.find((event) => event.get().configuration.get().name == this.state.name, R.values(this.state.application));\n        }\n\n    }\n\n    return CreateView;\n});\n"]}