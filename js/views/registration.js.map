{"version":3,"sources":["registration.es6"],"names":[],"mappings":"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","file":"registration.js","sourcesContent":["define(['react', 'react-bootstrap', 'ramda', 'shuttle', 'shuttle-react', 'moment', 'components/editable-table', 'components/text-cell', 'components/date-cell', 'components/select-cell', 'components/country-flag', 'utils/commons'], (React, ReactBootstrap, R, Shuttle, ShuttleReact, moment, EditableTableView, TextCellView, DateCellView, SelectCellView, CountryFlagView, Commons) => {\n    class ParticipantHeaderRenderer extends React.Component {\n\n        render() {\n            const DOM = React.DOM;\n\n            return DOM.tr({key: 'head-row'}, [\n                DOM.td({key: 'id-header'}, \"\"),\n                DOM.td({key: 'number-header'}, \"#\"),\n                DOM.th({key: 'country-header'}, \"Country\"),\n                DOM.th({key: 'name-header'}, \"Name\"),\n                DOM.th({key: 'motorcycle-header'}, \"Motorcycle\"),\n                DOM.th({key: 'birthday-header'}, \"Birthday\")\n            ]);\n        }\n\n    }\n\n    class ParticipantFooterRenderer extends React.Component {\n\n        render() {\n            return React.DOM.tr({key: 'foot-row'});\n        }\n\n    }\n\n    class ParticipantRenderer extends Shuttle.React.Component {\n\n        constructor(props) {\n            super(props);\n        }\n\n        render() {\n            const DOM = React.DOM;\n\n            const participant = this.state.item;\n            const validationStatus = !R.isEmpty(participant.number)\n                && !R.isEmpty(participant.country)\n                && !R.isEmpty(participant.name)\n                && !R.isEmpty(participant.motorcycle);\n\n            const number = Shuttle.ref(participant.number);\n            const country = Shuttle.ref(participant.country);\n            const name = Shuttle.ref(participant.name);\n            const motorcycle = Shuttle.ref(participant.motorcycle);\n            const birthday = Shuttle.ref(participant.birthday);\n\n            Shuttle\n                .combine([number, country, name, motorcycle, birthday], (number, country, name, motorcycle, birthday) => {\n                    return {\n                        id: participant.id,\n                        number: number,\n                        country: country,\n                        name: name,\n                        motorcycle: motorcycle,\n                        birthday: birthday\n                    }\n                })\n                .addListener((_, computed) => this.props.item.set(computed));\n\n            return DOM.tr({\n                key: 'row',\n                className: this.props.last ? \"\" : validationStatus ? 'list-group-item-success' : 'list-group-item-danger'\n            }, [\n                DOM.td({key: 'trash', style: {width: '24px'}}, this.props.deleteButton),\n\n                DOM.td({key: 'number', style: {width: '50px'}}, React.createElement(TextCellView, {\n                    key: 'number-cell',\n                    className: 'race-number without-scroll',\n                    style: {width: '50px'},\n                    maxLength: 3,\n                    value: number\n                })),\n                DOM.td({key: 'country', className: 'col-sm-1'}, DOM.div({\n                    key: 'country-inner',\n                    style: {height: '20px'}\n                }, React.createElement(SelectCellView, {\n                    key: 'country-cell',\n                    value: country,\n                    items: this.state.countries,\n                    renderer: (country) => DOM.div({\n                        style: {\n                            display: 'inline-block',\n                            width: '40px'\n                        }\n                    }, country ? React.createElement(CountryFlagView, {\n                        country: country\n                    }) : '')\n                }))),\n                DOM.td({key: 'name', className: 'col-sm-4'}, React.createElement(TextCellView, {\n                    key: 'name-cell',\n                    className: 'without-scroll',\n                    value: name\n                })),\n                DOM.td({\n                    key: 'motorcycle',\n                    className: 'col-sm-4'\n                }, React.createElement(TextCellView, {\n                    key: 'motorcycle-cell',\n                    className: 'without-scroll',\n                    value: motorcycle\n                })),\n                DOM.td({\n                    key: 'birthday',\n                    className: 'col-sm-3'\n                }, React.createElement(DateCellView, {key: 'birthday-cell', value: birthday})),\n\n                DOM.td({key: 'validation'}, this.props.last ? \"\" : validationStatus\n                    ? React.createElement(ReactBootstrap.Glyphicon, {glyph: 'ok'})\n                    : React.createElement(ReactBootstrap.Glyphicon, {glyph: 'remove'}))\n            ]);\n        }\n    }\n\n\n    class RegistrationView extends Shuttle.React.Component {\n\n        render() {\n            const DOM = React.DOM;\n\n            const eventId = this.props.params.eventId;\n            const shuffle = () => {\n                this.props.participants.set(R.sortBy(Math.random, this.state.participants))\n            };\n\n            return DOM.div({key: 'registration-root'}, [\n                React.createElement(ReactBootstrap.Pager, {key: 'pager-root'}, [\n                    React.createElement(ReactBootstrap.PageItem, {\n                        key: 'previous',\n                        previous: true,\n                        href: `#event/${eventId}/configuration`\n                    }, [\n                        React.createElement(ReactBootstrap.Glyphicon, {\n                            key: 'glyph',\n                            glyph: 'menu-left'\n                        }), ' ', \"Configuration\"\n                    ]),\n                    React.createElement(ReactBootstrap.PageItem, {\n                        key: 'current',\n                        href: `#event/${eventId}/registration`\n                    }, \"Registration\"),\n                    React.createElement(ReactBootstrap.PageItem, {\n                        key: 'next',\n                        next: true,\n                        href: `#event/${eventId}/competition`\n                    }, [\n                        \"Competition\", ' ', React.createElement(ReactBootstrap.Glyphicon, {\n                            key: 'glyph',\n                            glyph: 'menu-right'\n                        })\n                    ])\n                ]),\n\n                React.createElement(EditableTableView, {\n                    generateNextDefault: () => Shuttle.ref({\n                        id: Commons.guid(),\n                        number: \"\",\n                        country: null,\n                        name: \"\",\n                        motorcycle: \"\",\n                        birthday: moment()\n                    }),\n                    items: this.props.participants,\n                    props: {\n                        countries: this.props.countries\n                    },\n                    getId: participant => participant.id,\n                    isEmpty: participant => R.isEmpty(participant.number)\n                        && R.isEmpty(participant.country)\n                        && R.isEmpty(participant.name)\n                        && R.isEmpty(participant.motorcycle),\n                    headerRenderer: ParticipantHeaderRenderer,\n                    footerRenderer: ParticipantFooterRenderer,\n                    itemRenderer: ParticipantRenderer\n                }),\n\n                React.createElement(ReactBootstrap.Button, {\n                    className: 'pull-right',\n                    onClick: () => shuffle()\n                }, \"Shuffle\")\n            ]);\n        }\n    }\n\n    return RegistrationView;\n});\n"]}