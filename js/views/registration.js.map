{"version":3,"sources":["registration.es6"],"names":[],"mappings":"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","file":"registration.js","sourcesContent":["////������ ��������� ���� ������� �������\n//������� �����\\����� ��������� ������\n//������� �������������� ������� �� �����\n//������� ���������\n//��������� ������� � ���., ...\n//��������� �������+������ � �������������\ndefine(['react', 'react-bootstrap', 'react-router', 'ramda', 'shuttle', 'shuttle-react', 'utils/commons'], (React, ReactBootstrap, ReactRouter, R, Shuttle, ShuttleReact, Commons) => {\n\n\n    class Cell extends Shuttle.React.Component {\n\n        constructor(props) {\n            super(props);\n        }\n\n        render() {\n            return React.DOM.textarea({\n                defaultValue: this.state.value,\n                onChange: (event)=> {\n                    this.props.value.set(event.target.value);\n                }\n            })\n        }\n    }\n\n    class ParticipantView extends Shuttle.React.Component {\n\n        number;\n        country;\n        name;\n        motorcycle;\n        group;\n        birthday;\n        team;\n\n        listener;\n        participant;\n\n        constructor(props) {\n            super(props);\n\n            const participant = this.state.participant;\n\n            this.number = Shuttle.ref(participant.number);\n            this.country = Shuttle.ref(participant.country);\n            this.name = Shuttle.ref(participant.name);\n            this.motorcycle = Shuttle.ref(participant.motorcycle);\n            this.group = Shuttle.ref(participant.group);\n            this.birthday = Shuttle.ref(participant.birthday);\n            this.team = Shuttle.ref(participant.team);\n\n            this.listener = (_, participant) => this.props.participant.set(participant);\n            this.participant = Shuttle.combine([this.number, this.country, this.name, this.motorcycle, this.group, this.birthday, this.team], (number, country, name, motorcycle, group, birthday, team) => {\n                return {\n                    id: participant.id,\n                    number: number,\n                    country: country,\n                    name: name,\n                    motorcycle: motorcycle,\n                    group: group,\n                    birthday: birthday,\n                    team: team\n                }\n            });\n        }\n\n        componentDidMount() {\n            super.componentDidMount();\n\n            this.participant.addListener(this.listener);\n        }\n\n        componentWillUnmount() {\n            super.componentWillUnmount();\n\n            this.participant.removeListener(this.listener);\n        }\n\n        render() {\n            const DOM = React.DOM;\n            const participant = this.state.participant;\n            const onDelete = this.props.onDelete;\n\n            return DOM.tr({}, [\n                DOM.td({style: {width: '24px'}}, React.createElement(ReactBootstrap.Button, {\n                    disabled: this.props.last,\n                    bsSize: 'xsmall',\n                    onClick: onDelete\n                }, React.createElement(ReactBootstrap.Glyphicon, {glyph: 'trash'}))),\n                DOM.td({}, DOM.span({className: 'race-number'}, participant.number)),\n                DOM.td({}, DOM.img({\n                    height: '20px',\n                    src: `http://www.geonames.org/flags/x/${participant.country}.gif`\n                })),\n                DOM.td({}, React.createElement(Cell, {value: this.name})),\n                DOM.td({}, DOM.textarea({defaultValue: participant.motorcycle})),\n                DOM.td({}, DOM.textarea({defaultValue: participant.group})),\n                DOM.td({}, participant.birthday),\n                DOM.td({}, DOM.textarea({defaultValue: participant.team}))\n            ]);\n        }\n\n    }\n\n\n    class RegistrationView extends Shuttle.React.Component {\n\n        listener;\n        last;\n\n        constructor(props) {\n            super(props);\n\n            this.listener = (_, participant) => {\n                if (participant.number.length != 0\n                    || participant.country.length != 0\n                    || participant.name.length != 0\n                    || participant.motorcycle.length != 0\n                    || participant.group.length != 0\n                    || participant.team.length != 0) {\n\n                    const last = this.last;\n\n                    this.last = Shuttle.ref({id: Commons.guid(), number: \"\", country: \"\", name: \"\", motorcycle: \"\", group: \"\", birthday: \"\", team: \"\"});\n                    this.last.addListener(this.listener);\n\n                    last.removeListener(this.listener);\n                    this.props.participants.set(R.append(last, this.state.participants));\n                }\n            };\n\n            this.last = Shuttle.ref({id: Commons.guid(), number: \"\", country: \"\", name: \"\", motorcycle: \"\", group: \"\", birthday: \"\", team: \"\"});\n            this.last.addListener(this.listener)\n        }\n\n        render() {\n            const DOM = React.DOM;\n\n            const eventId = this.props.params.eventId;\n\n            return DOM.div({}, [\n                React.createElement(ReactBootstrap.Pager, {}, [\n                    React.createElement(ReactBootstrap.PageItem, {\n                        previous: true,\n                        href: `#event/${eventId}/configuration`\n                    }, [\n                        React.createElement(ReactBootstrap.Glyphicon, {glyph: 'menu-left'}), ' ', \"Configuration\"\n                    ]),\n                    React.createElement(ReactBootstrap.PageItem, {href: `#event/${eventId}/registration`}, \"Registration\"),\n                    React.createElement(ReactBootstrap.PageItem, {next: true, href: `#event/${eventId}/competition`}, [\n                        \"Competition\", ' ', React.createElement(ReactBootstrap.Glyphicon, {glyph: 'menu-right'})\n                    ])\n                ]),\n\n                React.createElement(ReactBootstrap.Table, {\n                    className: 'dataEditable',\n                    responsive: true,\n                    hover: true,\n                    striped: true\n                }, [\n                    DOM.thead({}, DOM.tr({}, [\n                        DOM.td({}, \"\"),\n                        DOM.td({}, \"#\"),\n                        DOM.th({}, \"Country\"),\n                        DOM.th({}, \"Name\"),\n                        DOM.th({}, \"Motorcycle\"),\n                        DOM.th({}, \"Group\"),\n                        DOM.th({}, \"Birthday\"),\n                        DOM.th({}, \"Team\")\n                    ])),\n\n                    DOM.tbody({}, [\n                        R.map((participant, i) => React.createElement(ParticipantView, {\n                                key: participant.get().id,\n                                participant: participant,\n                                onDelete: () => {\n                                    this.props.participants.set(R.filter((p) => p.get().id !== participant.get().id, this.state.participants))\n                                }\n                        }), this.state.participants),\n\n                        React.createElement(ParticipantView, {\n                            key: this.last.get().id,\n                            participant: this.last,\n                            last: true,\n                            onDelete: () => {}\n                        })\n                    ])\n                ])\n            ]);\n        }\n    }\n\n    return RegistrationView;\n});\n"]}