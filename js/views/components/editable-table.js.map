{"version":3,"sources":["editable-table.es6"],"names":[],"mappings":"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","file":"editable-table.js","sourcesContent":["define(['react', 'react-bootstrap', 'ramda', 'shuttle', 'shuttle-react', 'moment', 'components/text-cell', 'components/date-cell', 'components/select-cell', 'utils/commons'], (React, ReactBootstrap, R, Shuttle, ShuttleReact, moment, TextCellView, DateCellView, SelectCellView, Commons) => {\n    class EditableTableRowView extends React.Component {\n\n        listener;\n        itemProxy;\n\n        constructor(props) {\n            super(props);\n\n            this.listener = (_, item) => this.props.item.set(item);\n            this.itemProxy = Shuttle.ref(this.props.item.get());\n        }\n\n        componentDidMount() {\n            this.itemProxy.addListener(this.listener);\n        }\n\n        componentWillUnmount() {\n            this.itemProxy.removeListener(this.listener);\n        }\n\n        render() {\n            return React.createElement(this.props.renderer, R.merge({\n                item: this.itemProxy,\n                deleteButton: React.createElement(ReactBootstrap.Button, {\n                    key: 'button',\n                    disabled: this.props.last,\n                    bsSize: 'xsmall',\n                    onClick: this.props.onDelete\n                }, React.createElement(ReactBootstrap.Glyphicon, {key: 'glyph', glyph: 'trash'}))\n            }, this.props.rendererProps));\n        }\n    }\n\n\n    class EditableTableView extends Shuttle.React.Component {\n\n        listener;\n        last;\n\n        constructor(props) {\n            super(props);\n\n            const generateLast = () => {\n                this.last = this.props.generateNextDefault();\n                this.last.addListener(this.listener);\n            };\n\n            this.listener = (_, item) => {\n                if (!this.props.isEmpty(item)) {\n                    const last = this.last;\n\n                    last.removeListener(this.listener);\n\n                    this.props.items.set(R.append(last, this.props.items.get()));\n\n                    generateLast();\n                }\n            };\n\n            generateLast();\n        }\n\n        render() {\n            const DOM = React.DOM;\n\n            return React.createElement(ReactBootstrap.Table, {\n                key: 'table',\n                className: 'data-editable',\n                responsive: true,\n                hover: true,\n                striped: true\n            }, [\n                DOM.thead({key: 'table-head'}, React.createElement(this.props.headerRenderer, {})),\n                DOM.tbody({key: 'table-body'}, [\n                    R.flatten([\n                        R.map(item => React.createElement(EditableTableRowView, {\n                            key: this.props.getId(item.get()),\n                            item: item,\n                            renderer: this.props.itemRenderer,\n                            rendererProps: this.props.props,\n                            onDelete: () => {\n                                this.props.items.set(R.filter(i => i.get().id !== item.get().id, this.state.items))\n                            }\n                        }), this.state.items),\n                        React.createElement(EditableTableRowView, {\n                            key: this.props.getId(this.last.get()),\n                            item: this.last,\n                            renderer: this.props.itemRenderer,\n                            rendererProps: this.props.props,\n                            last: true,\n                            onDelete: () => {}\n                        })\n                    ])\n                ]),\n                DOM.tfoot({key: 'table-foot'}, React.createElement(this.props.footerRenderer, {}))\n            ]);\n        }\n    }\n\n    return EditableTableView;\n});\n\n"]}