{"version":3,"sources":["shuttle-react-snapshot.es6"],"names":[],"mappings":"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","file":"shuttle-react-snapshot.js","sourcesContent":["define(['shuttle', 'ramda', 'react'], function (Shuttle, R, React) {\r\n    class ShuttleReactComponent extends React.Component {\r\n\r\n        constructor(props) {\r\n            super(props);\r\n\r\n            this.state = this.computeState(this.props);\r\n        }\r\n\r\n        componentDidMount() {\r\n            var updateListener = this.updateListener.bind(this);\r\n\r\n            R.forEach(function (shuttleProp) {\r\n                shuttleProp.value.addListener(updateListener);\r\n            }, this.getShuttleProps(this.props));\r\n        }\r\n\r\n        componentWillUnmount() {\r\n            var updateListener = this.updateListener.bind(this);\r\n\r\n            R.forEach(function (shuttleProp) {\r\n                shuttleProp.value.removeListener(updateListener);\r\n            }, this.getShuttleProps(this.props));\r\n        }\r\n\r\n        getShuttleProps(props) {\r\n            return R.filter(function (prop) {\r\n                return prop.value instanceof Shuttle.Ref;\r\n            }, R.map(function (key) {\r\n                return {\r\n                    key: key,\r\n                    value: this.props[key]\r\n                };\r\n            }.bind(this), Object.keys(props)))\r\n        }\r\n\r\n        updateListener(_1, _2) {\r\n            this.setState(this.computeState(this.props));\r\n        }\r\n\r\n        componentWillReceiveProps() {\r\n            this.updateListener();\r\n        }\r\n\r\n        computeState(props) {\r\n            return R.reduce(function (object, prop) {\r\n                object[prop.key] = prop.value.get();\r\n\r\n                return object;\r\n            }, {}, this.getShuttleProps(props));\r\n        }\r\n\r\n        shouldComponentUpdate(nextProps, nextState) {\r\n            var computedState = this.computeState(nextProps);\r\n\r\n            return !R.reduce(R.and, true, R.map(function (key) {\r\n                    return R.eqDeep(computedState[key], this.state ? this.state[key] : null);\r\n                }.bind(this), Object.keys(computedState))) || R.eq(nextState, this.state);\r\n\r\n            return !R.eqDeep(this.computeState(nextProps), this.state);\r\n        }\r\n    }\r\n    ;\r\n\r\n    // publish\r\n    Shuttle.React = {\r\n        Component: ShuttleReactComponent\r\n    };\r\n\r\n    return 'use Shuttle.React.Component';\r\n});"]}