{"version":3,"sources":["shuttle-react-snapshot.es6"],"names":[],"mappings":";;;;;;;;;;AAAA,MAAM,CAAC,CAAC,SAAS,EAAE,OAAO,EAAE,OAAO,CAAC,EAAE,UAAU,OAAO,EAAE,CAAC,EAAE,KAAK,EAAE;QACzD,qBAAqB;kBAArB,qBAAqB;;AAIZ,iBAJT,qBAAqB,CAIX,KAAK,EAAE;;;kCAJjB,qBAAqB;;AAKnB,uCALF,qBAAqB,6CAKb,KAAK,EAAE;;AAEb,gBAAI,CAAC,cAAc,GAAG,UAAC,CAAC,EAAE,CAAC,EAAK;AAC5B,uBAAO,MAAK,QAAQ,CAAC,MAAK,YAAY,CAAC,MAAK,KAAK,EAAE,MAAK,KAAK,CAAC,CAAC,CAAA;aAClE,CAAC;AACF,gBAAI,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;SAClD;;;;qBAXC,qBAAqB;;mBAaN,6BAAG;;;AAChB,iBAAC,CAAC,OAAO,CAAC,UAAA,WAAW;2BAAI,WAAW,CAAC,KAAK,CAAC,WAAW,CAAC,OAAK,cAAc,CAAC;iBAAA,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;aAClH;;;mBAEmB,gCAAG;;;AACnB,iBAAC,CAAC,OAAO,CAAC,UAAA,WAAW;2BAAI,WAAW,CAAC,KAAK,CAAC,cAAc,CAAC,OAAK,cAAc,CAAC;iBAAA,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;aACrH;;;;;;;;;mBAOwB,mCAAC,KAAK,EAAE;AAC7B,oBAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;aACvD;;;mBAEiB,4BAAC,SAAS,EAAE,SAAS,EAAE;;;AACrC,iBAAC,CAAC,OAAO,CAAC,UAAA,WAAW;2BAAI,WAAW,CAAC,KAAK,CAAC,cAAc,CAAC,OAAK,cAAc,CAAC;iBAAA,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC,CAAC;AACjH,iBAAC,CAAC,OAAO,CAAC,UAAA,WAAW;2BAAI,WAAW,CAAC,KAAK,CAAC,WAAW,CAAC,OAAK,cAAc,CAAC;iBAAA,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;aAClH;;;mBAEW,sBAAC,KAAK,EAAE,KAAK,EAAE;AACvB,uBAAO,CAAC,CAAC,MAAM,CAAC,UAAC,MAAM,EAAE,IAAI,EAAK;AAC9B,0BAAM,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;;AAEpC,2BAAO,MAAM,CAAC;iBACjB,EAAE,KAAK,EAAE,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC;aAC1C;;;mBAEc,yBAAC,KAAK,EAAE;;;AACnB,uBAAO,CAAC,CAAC,MAAM,CAAC,UAAA,IAAI;2BAAI,IAAI,CAAC,KAAK,YAAY,OAAO,CAAC,GAAG;iBAAA,EAAE,CAAC,CAAC,GAAG,CAAC,UAAA,GAAG;2BAAI,CAAC,CAAC,QAAQ,CAAC;AAC/E,2BAAG,EAAE,GAAG;AACR,6BAAK,EAAE,OAAK,KAAK,CAAC,GAAG,CAAC;qBACzB,CAAC;iBAAA,EAAE,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;aAC3B;;;eAhDC,qBAAqB;OAAS,KAAK,CAAC,SAAS;;AAqDnD,WAAO,CAAC,KAAK,GAAG;AACZ,iBAAS,EAAE,qBAAqB;KACnC,CAAC;;AAEF,WAAO,6BAA6B,CAAC;CACxC,CAAC,CAAC","file":"shuttle-react-snapshot.js","sourcesContent":["define(['shuttle', 'ramda', 'react'], function (Shuttle, R, React) {\n    class ShuttleReactComponent extends React.Component {\n\n        updateListener;\n\n        constructor(props) {\n            super(props);\n\n            this.updateListener = (a, b) => {\n                return this.setState(this.computeState(this.props, this.state))\n            };\n            this.state = this.computeState(this.props, {});\n        }\n\n        componentDidMount() {\n            R.forEach(shuttleProp => shuttleProp.value.addListener(this.updateListener), this.getShuttleProps(this.props));\n        }\n\n        componentWillUnmount() {\n            R.forEach(shuttleProp => shuttleProp.value.removeListener(this.updateListener), this.getShuttleProps(this.props));\n        }\n\n        //shouldComponentUpdate(nextProps, nextState) {\n        //    return !R.equals(nextProps, this.props)\n        //        || !R.equals(this.computeState(nextProps, nextState), R.equals(this.computeState(this.props, this.lastState)));\n        //}\n\n        componentWillReceiveProps(props) {\n            this.setState(this.computeState(props, this.state));\n        }\n\n        componentDidUpdate(prevProps, prevState) {\n            R.forEach(shuttleProp => shuttleProp.value.removeListener(this.updateListener), this.getShuttleProps(prevProps));\n            R.forEach(shuttleProp => shuttleProp.value.addListener(this.updateListener), this.getShuttleProps(this.props));\n        }\n\n        computeState(props, state) {\n            return R.reduce((object, prop) => {\n                object[prop.key] = prop.value.get();\n\n                return object;\n            }, state, this.getShuttleProps(props));\n        }\n\n        getShuttleProps(props) {\n            return R.filter(prop => prop.value instanceof Shuttle.Ref, R.map(key => R.identity({\n                key: key,\n                value: this.props[key]\n            }), Object.keys(props)))\n        }\n\n    }\n\n    // publish\n    Shuttle.React = {\n        Component: ShuttleReactComponent\n    };\n\n    return 'use Shuttle.React.Component';\n});"]}