{"version":3,"sources":["shuttle-react-snapshot.es6"],"names":[],"mappings":"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","file":"shuttle-react-snapshot.js","sourcesContent":["define(['shuttle', 'ramda', 'react'], function (Shuttle, R, React) {\n    class ShuttleReactComponent extends React.Component {\n\n        updateListener;\n\n        constructor(props) {\n            super(props);\n\n            this.updateListener = (a, b) => {\n                return this.setState(this.computeState(this.props, this.state))\n            };\n            this.state = this.computeState(this.props, {});\n        }\n\n        componentDidMount() {\n            R.forEach(shuttleProp => shuttleProp.value.addListener(this.updateListener), this.getShuttleProps(this.props));\n        }\n\n        componentWillUnmount() {\n            R.forEach(shuttleProp => shuttleProp.value.removeListener(this.updateListener), this.getShuttleProps(this.props));\n        }\n\n        shouldComponentUpdate(nextProps, nextState) {\n            return true;//!R.equals(this.state, this.computeState(nextProps, nextState))\n        }\n\n        componentWillReceiveProps(props) {\n            this.setState(this.computeState(props, this.state));\n        }\n\n        componentDidUpdate(prevProps, prevState) {\n            const getShuttlePropsIds = R.compose(\n                R.map(prop => prop.value.guid),\n                this.getShuttleProps\n            );\n\n            if (!R.equals(getShuttlePropsIds(prevProps), getShuttlePropsIds(this.props))) {\n                R.forEach(shuttleProp => shuttleProp.value.removeListener(this.updateListener), this.getShuttleProps(prevProps));\n                R.forEach(shuttleProp => shuttleProp.value.addListener(this.updateListener), this.getShuttleProps(this.props));\n            }\n        }\n\n        computeState(props, state) {\n            return R.reduce((object, prop) => R.assoc(prop.key, prop.value.get(), object), state, this.getShuttleProps(props));\n        }\n\n        getShuttleProps(props) {\n            return R.filter(prop => prop.value instanceof Shuttle.Ref, R.map(key => R.identity({\n                key: key,\n                value: props[key]\n            }), Object.keys(props)))\n        }\n\n    }\n\n    // publish\n    Shuttle.React = {\n        Component: ShuttleReactComponent\n    };\n\n    return 'use Shuttle.React.Component';\n});"]}