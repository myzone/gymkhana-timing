{"version":3,"sources":["shuttle-react-snapshot.es6"],"names":[],"mappings":";;;;;;;;;;AAAA,MAAM,CAAC,CAAC,SAAS,EAAE,OAAO,EAAE,OAAO,CAAC,EAAE,UAAU,OAAO,EAAE,CAAC,EAAE,KAAK,EAAE;QACzD,qBAAqB;kBAArB,qBAAqB;;AAEZ,iBAFT,qBAAqB,CAEX,KAAK,EAAE;kCAFjB,qBAAqB;;AAGnB,uCAHF,qBAAqB,6CAGb,KAAK,EAAE;;AAEb,gBAAI,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SAC9C;;qBANC,qBAAqB;;mBAQN,6BAAG;AAChB,oBAAI,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;AAEpD,iBAAC,CAAC,OAAO,CAAC,UAAC,WAAW,EAAK;AACvB,+BAAW,CAAC,KAAK,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC;iBACjD,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;aACxC;;;mBAEmB,gCAAG;AACnB,oBAAI,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;AAEpD,iBAAC,CAAC,OAAO,CAAC,UAAC,WAAW,EAAK;AACvB,+BAAW,CAAC,KAAK,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;iBACpD,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;aACxC;;;mBAEc,yBAAC,KAAK,EAAE;;;AACnB,uBAAO,CAAC,CAAC,MAAM,CAAC,UAAC,IAAI,EAAK;AACtB,2BAAO,IAAI,CAAC,KAAK,YAAY,OAAO,CAAC,GAAG,CAAC;iBAC5C,EAAE,CAAC,CAAC,GAAG,CAAC,UAAC,GAAG,EAAK;AACd,2BAAO;AACH,2BAAG,EAAE,GAAG;AACR,6BAAK,EAAE,MAAK,KAAK,CAAC,GAAG,CAAC;qBACzB,CAAC;iBACL,EAAE,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;aAC1B;;;mBAEa,wBAAC,EAAE,EAAE,EAAE,EAAE;AACnB,oBAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;aAChD;;;mBAEwB,qCAAG;AACxB,oBAAI,CAAC,cAAc,EAAE,CAAC;aACzB;;;mBAEW,sBAAC,KAAK,EAAE;AAChB,uBAAO,CAAC,CAAC,MAAM,CAAC,UAAC,MAAM,EAAE,IAAI,EAAK;AAC9B,0BAAM,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;;AAEpC,2BAAO,MAAM,CAAC;iBACjB,EAAE,EAAE,EAAE,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC;aACvC;;;mBAEoB,+BAAC,SAAS,EAAE,SAAS,EAAE;AACxC,oBAAI,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;;;;;;AAMjD,uBAAO,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;aAC9D;;;eA3DC,qBAAqB;OAAS,KAAK,CAAC,SAAS;;AA6DnD,KAAC;;;AAGD,WAAO,CAAC,KAAK,GAAG;AACZ,iBAAS,EAAE,qBAAqB;KACnC,CAAC;;AAEF,WAAO,6BAA6B,CAAC;CACxC,CAAC,CAAC","file":"shuttle-react-snapshot.js","sourcesContent":["define(['shuttle', 'ramda', 'react'], function (Shuttle, R, React) {\n    class ShuttleReactComponent extends React.Component {\n\n        constructor(props) {\n            super(props);\n\n            this.state = this.computeState(this.props);\n        }\n\n        componentDidMount() {\n            var updateListener = this.updateListener.bind(this);\n\n            R.forEach((shuttleProp) => {\n                shuttleProp.value.addListener(updateListener);\n            }, this.getShuttleProps(this.props));\n        }\n\n        componentWillUnmount() {\n            var updateListener = this.updateListener.bind(this);\n\n            R.forEach((shuttleProp) => {\n                shuttleProp.value.removeListener(updateListener);\n            }, this.getShuttleProps(this.props));\n        }\n\n        getShuttleProps(props) {\n            return R.filter((prop) => {\n                return prop.value instanceof Shuttle.Ref;\n            }, R.map((key) => {\n                return {\n                    key: key,\n                    value: this.props[key]\n                };\n            }, Object.keys(props)))\n        }\n\n        updateListener(_1, _2) {\n            this.setState(this.computeState(this.props));\n        }\n\n        componentWillReceiveProps() {\n            this.updateListener();\n        }\n\n        computeState(props) {\n            return R.reduce((object, prop) => {\n                object[prop.key] = prop.value.get();\n\n                return object;\n            }, {}, this.getShuttleProps(props));\n        }\n\n        shouldComponentUpdate(nextProps, nextState) {\n            var computedState = this.computeState(nextProps);\n\n            //return !R.reduce(R.and, true, R.map((key) {\n            //        return R.eqDeep(computedState[key], this.state ? this.state[key] : null);\n            //    }.bind(this), Object.keys(computedState))) || R.eq(nextState, this.state);\n\n            return !R.eqDeep(this.computeState(nextProps), this.state);\n        }\n    }\n    ;\n\n    // publish\n    Shuttle.React = {\n        Component: ShuttleReactComponent\n    };\n\n    return 'use Shuttle.React.Component';\n});"]}